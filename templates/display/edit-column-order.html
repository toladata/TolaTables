{% extends "base.html" %}
{% block page_title %}Tables{% endblock %}


{% block content %}
    <p> Drag and drop elements to establish a column order </p>
    <form action="/edit_column_order/{{silo.id}}/" method="post">{% csrf_token %}
      <br><br>
      <table id="listcolumns" class="table table-bordered table-hover table-striped">
        {% for col in cols %}
            <tr>
              <td><input type="hidden" name="columns" value="{{col}}">{{col}}</td>
            <tr>
        {% endfor %}
    </table>
      <br><br><br>
      <input type="submit" value="Submit" class="btn btn-sm btn-primary">
    </form>

{% endblock content %}

{% block extra_js_in_body %}
    <script type="text/javascript">
        $(document).ready(function() {
          var fixHelperModified = function(e, tr) {
            var $originals = tr.children();
            var $helper = tr.clone();
            $helper.children().each(function(index) {
                $(this).width($originals.eq(index).width())
            });
            return $helper;
          },
          updateIndex = function(e, ui) {
              $('td.index', ui.item.parent()).each(function (i) {
                  $(this).html(i + 1);
              });
          };

          $("#listcolumns tbody").sortable({
            helper: fixHelperModified,
            stop: updateIndex
          }).disableSelection();
        });

    </script>
{% endblock extra_js_in_body %}
